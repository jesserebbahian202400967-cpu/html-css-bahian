<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bill Calculator</title>
  <link rel="stylesheet" href="calculator.css">
</head>
<body>

<nav class="navbar">
  <a href="profile.html">
    <img src="profile.png.webp" class="avatar">
  </a>
  <ul>
    <li><a href="dashboard.html">Dashboard</a></li>
    <li><a href="calculator.html" class="active">Calculator</a></li>
    <li><a href="history.html">History</a></li>
    <li><a href="login.html">Log out</a></li>
  </ul>
</nav>

<div class="main">
  <div class="form-box">
    <h2>Electricity Bill Calculator</h2>
    <p class="subtitle">Fill out the info below</p>

    <label>Month</label>
    <input type="text" id="month" placeholder="Ex: January">

    <label>Power Used (kWh)</label>
    <input type="number" id="consumption" placeholder="Ex: 200">

    <label>Price per kWh (₱)</label>
    <input type="number" id="rate" placeholder="Ex: 12">

<button onclick="myFunction()">Calculate</button>

</div>

<script>
  function myFunction() {
      let month = document.getElementById("month").value;
      let power_consumption = document.getElementById("consumption").value;
      let cost_per_kwh = document.getElementById("rate").value;

      let resultDisplay = document.getElementById("totalBill");

    
      let result_value = power_consumption * cost_per_kwh;
      resultDisplay.innerHTML = `₱${result_value.toFixed(2)}`;

      // Add result to result table in dashboard.html
      let result_table = document.getElementById("resulttable");
      
      if (result_table) {
          let newRow = result_table.insertRow();
          var cellMonth = newRow.insertCell(0);
          var cellPower = newRow.insertCell(1);
          var cellCost = newRow.insertCell(2);
          var cellResult = newRow.insertCell(3);

          cellMonth.innerHTML = month;
          cellPower.innerHTML = power_consumption;
          cellCost.innerHTML = cost_per_kwh;
          cellResult.innerHTML = "₱" + result_value.toFixed(2);
      }

      
      const entry = {
        month: month,
        consumption: power_consumption,
        rate: cost_per_kwh,
        total: result_value.toFixed(2)
      };

      let history = JSON.parse(localStorage.getItem("billHistory")) || [];
      history.push(entry);
      localStorage.setItem("billHistory", JSON.stringify(history));
  }
</script>

</body>
</html>

  <div class="result-box">
    <h3>Your Estimated Bill:</h3>
    <h1 id="totalBill">₱0.00</h1>
    <p class="note">Calculation: kWh × Rate</p>
  </div>
</div>

</body>
</html>

